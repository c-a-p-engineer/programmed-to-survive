<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
  <title>UI Catalog - Programmed to Survive</title>
  <link rel="stylesheet" href="./ui/ui.css"/>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>UI Catalog</h1>
      <p>
        ここはUIの“正解”を固定するページ。ゲーム側のUIはこの見た目・余白・サイズを基準にする。<br/>
        目標：スマホ縦（360×640付近）でも崩れない。相対パス前提。
      </p>
      <div class="row">
        <span class="badge">Target: Portrait</span>
        <span class="badge">Assets: Relative path only</span>
        <span class="badge">Rule: Don’t edit public/</span>
        <span class="badge">Hint: <span class="kbd">Ctrl</span> + <span class="kbd">Shift</span> + <span class="kbd">M</span>（端末表示）</span>
      </div>
    </div>

    <div class="grid">
      <section class="card">
        <h2>Buttons</h2>
        <div class="sub">ゲーム内の主要ボタン。サイズは“押しやすさ”最優先。</div>
        <div class="row">
          <button class="btn" id="btn-normal">Normal</button>
          <button class="btn btn--primary" id="btn-primary">Primary</button>
          <button class="btn btn--danger" id="btn-danger">Danger</button>
          <button class="btn" disabled>Disabled</button>
        </div>
        <div class="hr"></div>
        <div class="row">
          <input class="input" placeholder="Player name (example)" />
          <span class="badge">Badge</span>
        </div>
      </section>

      <section class="card">
        <h2>Slider / Settings</h2>
        <div class="sub">設定UIの基本。値の表示は必須。</div>
        <div class="row">
          <label class="badge">BGM</label>
          <input class="slider" type="range" min="0" max="100" value="45" id="bgm"/>
          <span class="badge" id="bgm-val">45</span>
        </div>
        <div class="row">
          <label class="badge">SFX</label>
          <input class="slider" type="range" min="0" max="100" value="70" id="sfx"/>
          <span class="badge" id="sfx-val">70</span>
        </div>
        <div class="hr"></div>
        <div class="row">
          <button class="btn btn--primary" id="btn-open-modal">Open Modal</button>
          <button class="btn" id="btn-toast">Toast</button>
        </div>
      </section>

      <section class="card">
        <h2>HUD Mock</h2>
        <div class="sub">Phaserの上に重ねる想定。HUDは画面端固定。</div>
        <div class="hud">
          <div class="hud-top">
            <div class="hud-chip">SCORE: 012345</div>
            <div class="hud-chip">TIME: 01:23</div>
          </div>
          <div class="hud-bottom">
            <div class="bar"><div></div></div>
            <div class="hud-chip">HP</div>
            <button class="btn btn--primary">Skill</button>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Layout Rules</h2>
        <div class="sub">AIが壊しがちな“守るべき寸法”。</div>
        <ul style="margin:0; padding-left: 18px; color: var(--muted); line-height:1.6; font-weight:700;">
          <li>タップ対象の高さは最低 44px（目安）</li>
          <li>角丸は 16〜22px を維持（丸すぎない）</li>
          <li>フォントサイズは 12 / 14 / 16 / 22 を基本に</li>
          <li>スマホ縦 360×640 でボタンが画面外に出ない</li>
        </ul>
      </section>
    </div>
  </div>

  <div class="modal-backdrop" id="demo-modal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <h3>Modal title</h3>
      <p>ゲーム中の「スキル選択」や「一時停止」等で使う。背景を暗くして操作対象を固定する。</p>
      <div class="actions">
        <button class="btn" data-close="demo-modal">Cancel</button>
        <button class="btn btn--primary" data-close="demo-modal">OK</button>
      </div>
    </div>
  </div>

  <div class="toast-wrap" id="toast-wrap"></div>

  <script type="module">
    import { $, $all, openModal, closeModal, toast } from "./ui/ui.js";

    const bgm = $("#bgm");
    const sfx = $("#sfx");
    const bgmVal = $("#bgm-val");
    const sfxVal = $("#sfx-val");

    function bindRange(r, out){
      const f = () => out.textContent = String(r.value);
      r.addEventListener("input", f);
      f();
    }
    bindRange(bgm, bgmVal);
    bindRange(sfx, sfxVal);

    $("#btn-open-modal").addEventListener("click", () => openModal("demo-modal"));
    $("#btn-toast").addEventListener("click", () => toast("Saved", "Settings updated"));

    $all("[data-close]").forEach(btn => {
      btn.addEventListener("click", () => closeModal(btn.getAttribute("data-close")));
    });

    // backdrop click to close
    $("#demo-modal").addEventListener("click", (e) => {
      if(e.target.id === "demo-modal") closeModal("demo-modal");
    });
  </script>
</body>
</html>
